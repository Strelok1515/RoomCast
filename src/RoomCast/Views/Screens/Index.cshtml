@model IEnumerable<RoomCast.Models.Casting.Screen>

@{
    ViewData["Title"] = "Screens";
}

<style>

    /* -------------------------
               Button system (outline)
            ------------------------- */
    .rc-btn {
        display: inline-flex;
        align-items: center;
        gap: .4rem;
        padding: .45rem .8rem;
        border-radius: .5rem;
        font-size: .85rem;
        font-weight: 600;
        border: 1px solid transparent;
        background: #fff;
        transition: background-color .15s ease, box-shadow .15s ease, color .15s ease, border-color .15s ease;
    }

        .rc-btn i {
            transition: inherit;
        }

    .rc-btn-outline-indigo {
        color: #3730a3;
        border-color: #c7d2fe;
    }

        .rc-btn-outline-indigo:hover {
            background: #eef2ff;
            box-shadow: 0 0 1px #e0e7ff;
        }

    .rc-btn-outline-amber {
        color: #b45309;
        border-color: #fde68a;
    }

        .rc-btn-outline-amber:hover {
            background: #fef3c7;
            box-shadow: 0 0 1px #fde68a;
        }

    .rc-btn-outline-rose {
        color: #b91c1c;
        border-color: #fecaca;
    }

        .rc-btn-outline-rose:hover {
            background: #fee2e2;
            box-shadow: 0 0 1px #fecaca;
        }

    .rc-btn-outline-sky {
        color: #0369a1;
        border-color: #bae6fd;
    }

        .rc-btn-outline-sky:hover {
            background: #e0f2fe;
            box-shadow: 0 0 1px #bae6fd;
        }

    .rc-btn-outline-gray {
        color: #374151;
        border-color: #e5e7eb;
    }

        .rc-btn-outline-gray:hover {
            background: #f3f4f6;
            box-shadow: 0 0 1px #e5e7eb;
        }

    /* Add Screen button (filled) */
    .rc-btn-filled-indigo {
        background: #4f46e5;
        color: #fff;
        box-shadow: 0 1px 0 rgba(0,0,0,.04);
    }

        .rc-btn-filled-indigo:hover {
            background: #4338ca;
            box-shadow: 0 0 1px #a5b4fc;
        }
</style>

<div class="flex justify-between items-center mb-8">
    <h1 class="text-3xl font-bold text-slate-800">Screens</h1>
    <a asp-action="Create"
       class="rc-btn rc-btn-filled-indigo glow-on-hover">
        <i class="bi bi-plus-lg icon-zoom" style="color:#ffffff"></i>
        Add Screen
    </a>
</div>
<br />

@if (!Model.Any())
{
    <div class="rounded-2xl bg-white p-12 text-center shadow-sm ring-1 ring-slate-200">
        <i class="bi bi-tv text-5xl text-slate-400"></i>
        <h2 class="mt-4 text-xl font-semibold text-slate-700">No Screens Found</h2>
        <p class="mt-2 text-slate-500">Start by adding your first display screen.</p>

        <a asp-action="Create"
           class="rc-btn rc-btn-filled-indigo glow-on-hover">
            <i class="bi bi-plus-lg icon-zoom" style="color:#ffffff"></i>
            Add Screen
        </a>
    </div>
}
else
{
    <div class="overflow-hidden rounded-xl bg-white shadow-sm ring-1 ring-slate-200">
        <table class="min-w-full divide-y divide-slate-200">
            <thead class="bg-slate-50">
                <tr>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-slate-600">Name</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-slate-600">Location</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-slate-600">Description</th>
                    <th class="px-6 py-3 text-left text-xs font-semibold text-slate-600">Assigned</th>
                    <th class="px-6 py-3 text-center text-xs font-semibold text-slate-600">Actions</th>
                </tr>
            </thead>

            <tbody class="divide-y divide-slate-100 bg-white">
                @foreach (var screen in Model)
                {
                    <tr class="row-hover hover:bg-slate-50">

                        <!-- Name -->
                        <td class="px-6 py-4 text-sm font-medium text-slate-800">
                            <div class="flex items-center gap-2">
                                <i class="bi bi-tv rc-icon-tv icon-zoom" style="color:#6366f1;"></i>
                                @screen.Name
                            </div>
                        </td>

                        <!-- Location -->
                        <td class="px-6 py-4 text-sm text-slate-600">@screen.Location</td>

                        <!-- Description -->
                        <td class="px-6 py-4 text-sm text-slate-600 max-w-xs">
                            <span class="line-clamp-2">@screen.Description</span>
                        </td>

                        <!-- Assigned -->
                        <td class="px-6 py-4 text-sm text-slate-700">
                            <div><strong>Media:</strong> @(screen.ScreenMediaAssignments?.Count ?? 0)</div>

                            <div class="mt-1">
                                <strong>Albums:</strong>
                                @if (screen.AlbumScreenAssignments?.Any() == true)
                                {
                                    <ul class="mt-1 ml-4 list-disc text-slate-600">
                                        @foreach (var a in screen.AlbumScreenAssignments)
                                        {
                                            <li>@a.Album?.AlbumName</li>
                                        }
                                    </ul>
                                }
                                else
                                {

                                    <span class="text-slate-500">None</span>
                                }
                            </div>
                        </td>

                        <!-- Actions -->
                        <td class="px-6 py-4 text-center">
                            <div class="flex flex-wrap justify-center gap-2">

                                <!-- Assign -->
                                <a asp-action="AssignMedia" asp-route-id="@screen.ScreenId"
                                   class="rc-btn rc-btn-outline-indigo glow-on-hover">
                                    <i class="bi bi-sliders icon-zoom" style="color:#6366f1;"></i>
                                    Assign
                                </a>

                                <!-- Edit -->
                                <a asp-action="Edit" asp-route-id="@screen.ScreenId"
                                   class="rc-btn rc-btn-outline-amber glow-on-hover">
                                    <i class="bi bi-pencil icon-zoom" style="color:#f59e0b;"></i>
                                    Edit
                                </a>

                                <!-- Delete -->
                                <a asp-action="Delete" asp-route-id="@screen.ScreenId"
                                   class="rc-btn rc-btn-outline-rose glow-on-hover">
                                    <i class="bi bi-trash icon-zoom" style="color:#dc2626;"></i>
                                    Delete
                                </a>

                                <!-- Preview -->
                                <a asp-action="ScreenDisplay" asp-route-screenId="@screen.ScreenId"
                                   class="rc-btn rc-btn-outline-sky glow-on-hover">
                                    <i class="bi bi-play-circle icon-zoom" style="color:#0ea5e9;"></i>
                                    Preview
                                </a>

                                <!-- Details -->
                                <a asp-action="Details" asp-route-id="@screen.ScreenId"
                                   class="rc-btn rc-btn-outline-gray glow-on-hover">
                                    <i class="bi bi-eye icon-zoom" style="color:#6b7280;"></i>
                                    Details
                                </a>

                            </div>
                        </td>

                    </tr>
                }
            </tbody>
        </table>
    </div>
}
